{
	"info": {
		"_postman_id": "email-template-testing-123",
		"name": "Email Template Testing with Conditions & Current Date",
		"description": "Complete collection for testing all email templates with condition-based validation and current_date parameter for easy explanation. Only sends emails when conditions match the template's trigger logic.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get Available Templates",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/test-email",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"test-email"
					]
				},
				"description": "Get list of all available email templates and their conditions"
			},
			"response": []
		},
		{
			"name": "Trial Email Tests",
			"item": [
				{
					"name": "Day 3 Trial Reminder - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Day 3 Trial Reminder sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day3TrialReminder\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-31T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-07T00:00:00Z\",\n    \"has_links\": false,\n    \"days_since_trial_start\": 3\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 3 Trial Reminder with valid conditions: 3 days since trial start, trial status, no links. Current date: Sep 3, 2025. Trial started: Aug 31, 2025 (3 days ago)."
					},
					"response": []
				},
				{
					"name": "Day 3 Trial Reminder - Invalid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Conditions not satisfied\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.false;",
									"    pm.expect(jsonData.validation).to.exist;",
									"    console.log(\"❌ Day 3 Trial Reminder not sent - \" + jsonData.validation);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day3TrialReminder\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-31T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-07T00:00:00Z\",\n    \"has_links\": false,\n    \"days_since_trial_start\": 5\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 3 Trial Reminder with invalid conditions: wrong days since trial start (5 instead of 3). Current date: Sep 3, 2025."
					},
					"response": []
				},
				{
					"name": "Day 5 Trial Ending - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Day 5 Trial Ending sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day5TrialEnding\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-29T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-05T00:00:00Z\",\n    \"has_links\": false,\n    \"days_since_trial_start\": 5\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 5 Trial Ending with valid conditions: 5 days since trial start, trial status, no links. Current date: Sep 3, 2025. Trial started: Aug 29, 2025 (5 days ago)."
					},
					"response": []
				},
				{
					"name": "Day 5 Trial Ending - Invalid Conditions (Has Links)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Conditions not satisfied\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.false;",
									"    pm.expect(jsonData.validation).to.exist;",
									"    console.log(\"❌ Day 5 Trial Ending not sent - \" + jsonData.validation);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day5TrialEnding\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-29T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-05T00:00:00Z\",\n    \"has_links\": true,\n    \"days_since_trial_start\": 5\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 5 Trial Ending with invalid conditions: user has links (should not send). Current date: Sep 3, 2025."
					},
					"response": []
				},
				{
					"name": "Day 6 Trial Ends Tomorrow - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Day 6 Trial Ends Tomorrow sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day6TrialEndsTomorrow\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-28T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-04T00:00:00Z\",\n    \"has_links\": false,\n    \"days_since_trial_start\": 6\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 6 Trial Ends Tomorrow with valid conditions: 6 days since trial start, trial status, no links. Current date: Sep 3, 2025. Trial started: Aug 28, 2025 (6 days ago)."
					},
					"response": []
				},
				{
					"name": "Day 7 Trial Ends Today - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Day 7 Trial Ends Today sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Day7TrialEndsToday\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"trial_started_at\": \"2025-08-27T00:00:00Z\",\n    \"subscription_status\": \"trial\",\n    \"entitlement_pro_until\": \"2025-09-03T00:00:00Z\",\n    \"has_links\": false,\n    \"days_since_trial_start\": 7\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Day 7 Trial Ends Today with valid conditions: 7 days since trial start, trial status, no links. Current date: Sep 3, 2025. Trial started: Aug 27, 2025 (7 days ago)."
					},
					"response": []
				}
			],
			"description": "Trial email workflow tests with condition validation and current_date for easy explanation"
		},
		{
			"name": "Weekly Post Creation Tests",
			"item": [
				{
					"name": "Week 1 Post Creation - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Week 1 Post Creation sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Week1PostCreation\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-27T00:00:00Z\",\n    \"days_since_created\": 7\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Week 1 Post Creation with valid conditions: exactly 7 days since account creation. Current date: Sep 3, 2025. Account created: Aug 27, 2025 (7 days ago)."
					},
					"response": []
				},
				{
					"name": "Week 2 Post Creation - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Week 2 Post Creation sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Week2PostCreation\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-20T00:00:00Z\",\n    \"days_since_created\": 14\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Week 2 Post Creation with valid conditions: exactly 14 days since account creation. Current date: Sep 3, 2025. Account created: Aug 20, 2025 (14 days ago)."
					},
					"response": []
				},
				{
					"name": "Week 3 Post Creation - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Week 3 Post Creation sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Week3PostCreation\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-13T00:00:00Z\",\n    \"days_since_created\": 21\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Week 3 Post Creation with valid conditions: exactly 21 days since account creation. Current date: Sep 3, 2025. Account created: Aug 13, 2025 (21 days ago)."
					},
					"response": []
				},
				{
					"name": "Week 4 Post Creation - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Week 4 Post Creation sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Week4PostCreation\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-06T00:00:00Z\",\n    \"days_since_created\": 28\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Week 4 Post Creation with valid conditions: exactly 28 days since account creation. Current date: Sep 3, 2025. Account created: Aug 6, 2025 (28 days ago)."
					},
					"response": []
				}
			],
			"description": "Weekly post creation email workflow tests with current_date for easy explanation"
		},
		{
			"name": "Subscription Renewal Tests",
			"item": [
				{
					"name": "Subscription Renewal 30 Days - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Subscription Renewal 30 Days sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"SubscriptionRenewal\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"subscription_status\": \"active\",\n    \"days_until_expiration\": 30\n  },\n  \"renewalDate\": \"October 3, 2025\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Subscription Renewal with valid conditions: active subscription expiring in 30 days. Current date: Sep 3, 2025. Expires: Oct 3, 2025 (30 days from now)."
					},
					"response": []
				},
				{
					"name": "Subscription Renewal Week - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Subscription Renewal Week sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"SubscriptionRenewalWeek\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"subscription_status\": \"active\",\n    \"days_until_expiration\": 7\n  },\n  \"renewalDate\": \"September 10, 2025\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Subscription Renewal Week with valid conditions: active subscription expiring in 7 days. Current date: Sep 3, 2025. Expires: Sep 10, 2025 (7 days from now)."
					},
					"response": []
				},
				{
					"name": "Subscription Renewal Day - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Subscription Renewal Day sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"SubscriptionRenewalDay\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"subscription_status\": \"active\",\n    \"days_until_expiration\": 1\n  },\n  \"renewalDate\": \"September 4, 2025\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Subscription Renewal Day with valid conditions: active subscription expiring in 1 day. Current date: Sep 3, 2025. Expires: Sep 4, 2025 (1 day from now)."
					},
					"response": []
				},
				{
					"name": "Subscription Renewal - Invalid Conditions (Trial Status)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Conditions not satisfied\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.false;",
									"    pm.expect(jsonData.validation).to.exist;",
									"    console.log(\"❌ Subscription Renewal not sent - \" + jsonData.validation);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"SubscriptionRenewal\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"subscription_status\": \"trial\",\n    \"days_until_expiration\": 30\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Subscription Renewal with invalid conditions: trial status instead of active. Current date: Sep 3, 2025."
					},
					"response": []
				}
			],
			"description": "Subscription renewal email workflow tests with current_date for easy explanation"
		},
		{
			"name": "Monthly Tests",
			"item": [
				{
					"name": "30 Days Feedback Survey - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ 30 Days Feedback Survey sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"FeedbackSurvey30Days\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-04T00:00:00Z\",\n    \"days_since_created\": 30\n  },\n  \"surveyUrl\": \"https://forms.gle/YourSurveyLinkHere\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test 30 Days Feedback Survey with valid conditions: exactly 30 days since account creation. Current date: Sep 3, 2025. Account created: Aug 4, 2025 (30 days ago)."
					},
					"response": []
				},
				{
					"name": "Month 1 Paid User - Valid Conditions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Month 1 Paid User sent - conditions satisfied\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"Month1PaidUser\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\",\n  \"conditions\": {\n    \"created_at\": \"2025-08-04T00:00:00Z\",\n    \"days_since_created\": 30,\n    \"subscription_status\": \"paid\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Month 1 Paid User with valid conditions: 30 days since creation, paid subscription. Current date: Sep 3, 2025. Account created: Aug 4, 2025 (30 days ago)."
					},
					"response": []
				}
			],
			"description": "Monthly milestone email workflow tests with current_date for easy explanation"
		},
		{
			"name": "Welcome & Onboarding Tests",
			"item": [
				{
					"name": "Free User Welcome",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email sent successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"    pm.expect(jsonData.emailId).to.exist;",
									"    console.log(\"✅ Free User Welcome sent - no conditions required\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"template\": \"FreeUserWelcome\",\n  \"email\": \"{{test_email}}\",\n  \"username\": \"Dhanush\",\n  \"current_date\": \"2025-09-03T00:00:00Z\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/test-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"test-email"
							]
						},
						"description": "Test Free User Welcome - no conditions required, always sends. Current date: Sep 3, 2025."
					},
					"response": []
				}
			],
			"description": "Welcome and onboarding email workflow tests with current_date for easy explanation"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global pre-request script",
					"console.log(\"Testing email template: \" + pm.request.body.raw ? JSON.parse(pm.request.body.raw).template : \"Unknown\");"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test script for all requests",
					"pm.test(\"Response time is reasonable\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"pm.test(\"Response is JSON\", function () {",
					"    pm.response.to.be.json;",
					"});",
					"",
					"// Log response for debugging",
					"console.log(\"Response:\", pm.response.json());"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "test_email",
			"value": "dhanush@klmsolutions.in",
			"type": "string"
		}
	]
}
